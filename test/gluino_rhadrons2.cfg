process Rec = 
{
#	untracked PSet maxEvents = {untracked int32 input = 50}
	untracked PSet maxEvents = {untracked int32 input = 5}

        untracked PSet configurationMetadata = {
           untracked string version = "$Revision: 1.2 $"
           untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/GeneratorInterface/Pythia6Interface/test/gluino_rhadrons2.cfg,v $"
           untracked string annotation = "RelVal b jets with pt hat 50-120GeV"
        }

    service = RandomNumberGeneratorService {
      PSet pyth = {
        untracked uint32 initialSeed = 123456789
      }
#   untracked string saveFileName = "SaveState.dat"
    }

    untracked PSet options = {
       include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
       untracked bool wantSummary = true
       untracked bool makeTriggerResults = true 
 }

include "Configuration/Generator/data/PythiaUESettings.cfi"

  module pyth = PythiaProducer {
  
    string pythiaFrame = "CMS"
    double comEnergy = 14000.
  
    untracked bool pythiaVerbosity = true
    untracked int32 pythiaPylistVerbosity = 3
    untracked bool pythiaHepMCVerbosity = true 
    untracked int32 maxEventsToPrint = 2    
    untracked bool stopHadrons = false
    untracked bool gluinoHadrons = true
    PSet PythiaParameters = {
      # This is a vector of ParameterSet names to be read, in this order
      vstring parameterSets = {
        "pythiaUESettings",
        "pythiaGluinoRHadrons"
      }

      # CMS default pythia parameters
      using pythiaUESettingsBlock

      # b jets (configuration by Filip Moortgat)
      vstring pythiaGluinoRHadrons = {
         'MSEL=0                 ! User defined processes',
         'MSTP(51)=7             ! CTEQ5L structure function',
         'IMSS(1)=1              !  brute force',
         'MSUB(243)=1            !  subprocess',
         'MSUB(244)=1            !  subprocess',

         'IMSS(3)=1',
         'RMSS(3)=300.',
         'RMSS(1)=250.',
         'RMSS(2)=250.',
         'RMSS(4)=10000.',
         'MDCY(309,1)=0          ! set gluino stable',
         'IMSS(5)=1',
         'RMSS(12)=1000.',
         'MSTJ(14)=-1',
         'MSTP(111)=0'
      }
    }
  }

#   include "FWCore/MessageService/data/MessageLogger.cfi"
#   replace MessageLogger.cerr.threshold = "ERROR"
#   replace MessageLogger.cerr.default.limit = 10

  #  path p1 = {psim} # simulation
  #  path p2 = {pdigi} # digitization
  #  path p3 = {trackerlocalreco, calolocalreco, ckftracks, ecalClusters, caloTowersRec, recoJets, metreco }

   # Event output
include "Configuration/EventContent/data/EventContent.cff"
   module FEVT = PoolOutputModule { 
     	using FEVTSIMEventContent
	untracked string fileName = "file:b_jets2.root"
    	untracked PSet dataset ={	
        	untracked string dataTier = "GEN-SIM-DIGI-RECO"
    	}
   }

   source = EmptySource {}

   path p0 = {pyth}

   endpath outpath = {FEVT}

   schedule = {p0,outpath}

}
