process TEST = 
{

  # initialize  MessageLogger
 # include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98767
  }

  source = PythiaSource 
  {
    untracked int32 maxEvents = 10000
    untracked bool pythiaHepMCVerbosity = true
    untracked int32 maxEventsToPrint = 10
#  possibility to run single or double back-to-back particles with PYTHIA
# if ParticleID = 0, run PYTHIA
    untracked int32 ParticleID = -15
    untracked bool DoubleParticle = false
    untracked double Ptmin = 20. 
    untracked double Ptmax = 420.
    untracked double Emin = 40. 
    untracked double Emax = 100.
    untracked double Etamin = -2.6 
    untracked double Etamax = 2.6
    untracked double Phimin = 0. 
    untracked double Phimax = 360.
    untracked bool UseTauola = true
    untracked bool UseTauolaPolarization = false

    PSet PythiaParameters = 
    {
      # This is a vector of ParameterSet names to be read, in this order
      vstring parameterSets = 
      {
        "pythiaCMSDefaults"
      }

      # CMS default
      vstring pythiaCMSDefaults = 
      {
        'PMAS(5,1)=4.8   ! b quark mass',
        'PMAS(6,1)=172.3 ! t quark mass',
        'MSTJ(11)=3      ! Choice of the fragmentation function',
        'MSTJ(22)=2      ! Decay those unstable particles',
        'PARJ(71)=10.    ! for which ctau  10 mm',
        'MSTP(2)=1       ! which order running alphaS',
        'MSTP(33)=0      ! no K factors in hard cross sections',
        'MSTP(51)=7      ! structure function chosen',
        'MSTP(81)=1      ! multiple parton interactions 1 is Pythia default',
        'MSTP(82)=4      ! Defines the multi-parton model',
        'MSTU(21)=1      ! Check on possible errors during program execution',
        'PARP(82)=1.9    ! pt cutoff for multiparton interactions',
        'PARP(89)=1000.  ! sqrts for which PARP82 is set',
        'PARP(83)=0.5    ! Multiple interactions: matter distrbn parameter',
        'PARP(84)=0.4    ! Multiple interactions: matter distribution parameter',
        'PARP(90)=0.16   ! Multiple interactions: rescaling power',
        'PARP(67)=1.     ! amount of initial-state radiation',
        'PARP(85)=0.33   ! gluon prod. mechanism in MI',
        'PARP(86)=0.66   ! gluon prod. mechanism in MI',
        'PARP(87)=0.7    ! ',
        'PARP(88)=0.5    ! ',
        'PARP(91)=1.0    ! kt distribution'
      }
    }

    PSet GeneratorParameters = 
    { 
      vstring parameterSets = { 
        "generator"  
      }

      vstring generator = { 
        "TAUOLA = 0 0 0 ! TAUOLA "
      }
    }

  }

  module out = PoolOutputModule { 
    untracked string fileName = "singleTau_flatEnergy_TAUOLA.root"
  } 
  
  module analyzer = TauDecayAnalyzer {
    string srcHepMC = "source"
    string histogramFileName = "histograms_singleTau_flatEnergy_TAUOLA.root"
  }

  endpath e = { out, analyzer }
}
